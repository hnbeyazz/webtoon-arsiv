<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√∂l√ºm 9 - Merry Marbling</title>
    <style>
        @font-face { font-family: 'PublicaSans'; src: url('PublicaSans-Italic.otf') format('opentype'); font-weight: normal; font-style: italic;}

        * {
            -webkit-tap-highlight-color: transparent;
            outline: none;
            touch-action: manipulation;
        }

        body { 
            margin: 0;  
            display: flex;  
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh; 
            background-color: #00001a;
            background-image: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('media17.jpg'); 
            background-attachment: fixed; background-size: cover; background-position: center;
            font-family: 'PublicaSans', italic;
        }

        .site-header { width: 100%; padding: 40px 0; display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 1000; }
        .site-logo { height: 200px; width: auto; transition: transform 0.3s ease; }
        .logo-sol { margin-left: 50px; }
        .logo-sag { margin-right: 50px; }

        #game-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            padding: 15px;
            border-radius: 20px;
            width: 90%;
            max-width: 320px;
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            margin: 0 auto 30px auto;
        }

        #board { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            margin: 15px 0; 
        }

        .cell { 
            width: 100%;
            aspect-ratio: 1 / 1; 
            background: rgba(56, 39, 53, 0.1); 
            border: 1px solid #ffcbdb;
            border-radius: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 2rem; 
            cursor: pointer; 
            transition: 0.2s; 
        }

        .cell:hover { background: rgba(218, 140, 163, 0.63) !important; transform: translateY(-2px); }

        .btn-reset { background: #ffcbdb; color: #000; border: none; padding: 12px 30px; border-radius: 30px; cursor: pointer; font-family: 'PublicaSans', italic; margin-bottom: 25px; transition: 0.3s; }
        
        .hadi√∂yleolsun { max-width: 380px; padding: 15px 20px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(4px); border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); color: white; margin-bottom: 50px; text-align: center; }

        .yorum-arkaplan-paneli { width: 90%; max-width: 900px; padding: 20px; margin-bottom: 50px; background: rgba(0, 0, 0, 0.3); border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); }

        @media (max-width: 600px) { 
            .site-logo { height: 80px; }
            .logo-sol { margin-left: 15px; }
            .logo-sag { margin-right: 15px; }
            .cell { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <a href="index.html"> <img src="bde76bbd2219b950f8260f7a1e7c8f95-removebg-preview.png" alt="Sol Logo" class="site-logo logo-sol"> </a>
        <div class="logo-konteyner"> <img src="bcece9b4e9950676edf34fe974961d5b-removebg-preview.png" alt="Saƒü Logo" class="site-logo logo-sag"> </div>
    </header>

    <div id="game-container">
        <h2 style="margin-bottom: 5px; font-size: 1.1rem; color: #fff;">9. B√∂l√ºm√º Ho≈ü√ßa Bekleme Aktivitesi</h2>
        <p id="status" style="margin-bottom: 15px; font-size: 0.9rem;">Sƒ±ra sende (X)</p>
        
        <div id="board">
            <div class="cell" onclick="playerMove(0)"></div>
            <div class="cell" onclick="playerMove(1)"></div>
            <div class="cell" onclick="playerMove(2)"></div>
            <div class="cell" onclick="playerMove(3)"></div>
            <div class="cell" onclick="playerMove(4)"></div>
            <div class="cell" onclick="playerMove(5)"></div>
            <div class="cell" onclick="playerMove(6)"></div>
            <div class="cell" onclick="playerMove(7)"></div>
            <div class="cell" onclick="playerMove(8)"></div>
        </div>
        
        <button class="btn-reset" onclick="resetGame()">Yeniden Ba≈ülat</button>

        <h4 style="margin: 10px 0; font-size: 0.8rem;">üèÜ SKOR TABLOSU</h4>
        <table style="width:100%; font-size: 0.8rem; font-family: 'PublicaSans', italic; border-collapse: collapse;">
            <tr><td>Sen (X)</td><td id="player-wins" style=" font-family: 'PublicaSans', italic; color: #fab1a0;">0</td></tr>
            <tr><td>LucaenBot (O)</td><td id="bot-wins" style=" font-family: 'PublicaSans', italic; color: #81ecec;">0</td></tr>
        </table>
    </div>

    <div class="hadi√∂yleolsun"> 
        <h2 style="font-size: 1.2rem; margin-top: 0;">Bilgilendirme</h2>
        <p>Galibiyet sayƒ±nƒ±zƒ± yorumlarda payla≈üƒ±n ve b√∂l√ºm√ºn yayƒ±nlanma g√ºn√ºn√º o kadar ileri √ßekin!</p>
    </div>

    <div class="yorum-arkaplan-paneli">
        <div id="disqus_thread"></div>
    </div>

    <script>
        let board = ['', '', '', '', '', '', '', '', ''];
        let gameActive = true;
        let playerWins = parseInt(localStorage.getItem('lucaenWins')) || 0;
        let botWins = parseInt(localStorage.getItem('lucaenBotWins')) || 0;

        document.getElementById('player-wins').innerText = playerWins;
        document.getElementById('bot-wins').innerText = botWins;

        const winPatterns = [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6]];

        function playerMove(index) {
            if (board[index] === '' && gameActive) {
                makeMove(index, 'X');
                if (gameActive) {
                    document.getElementById('status').innerText = "LucaenBot d√º≈ü√ºn√ºyor...";
                    setTimeout(botMove, 600);
                }
            }
        }

        function botMove() {
            if (!gameActive) return;

            // STRATEJƒ∞K KARAR MEKANƒ∞ZMASI
            
            // 1. √ñNCELƒ∞K: Rakibi engelle (X'in kazanmasƒ±nƒ± durdur)
            let move = findBestMove('X');

            // 2. ƒ∞Kƒ∞NCƒ∞ √ñNCELƒ∞K: Eƒüer tehlike yoksa kazanmaya √ßalƒ±≈ü
            if (move === null) {
                move = findBestMove('O');
            }

            // 3. √ú√á√úNC√ú √ñNCELƒ∞K: Stratejik kareleri tut
            if (move === null) {
                if (board[4] === '') {
                    move = 4; // Merkez kare her zaman en iyisidir
                } else {
                    // K√∂≈üeleri kontrol et (0, 2, 6, 8)
                    const corners = [0, 2, 6, 8].filter(i => board[i] === '');
                    if (corners.length > 0) {
                        move = corners[Math.floor(Math.random() * corners.length)];
                    } else {
                        move = randomMove();
                    }
                }
            }

            if (move !== null) {
                makeMove(move, 'O');
                if (gameActive) document.getElementById('status').innerText = "Senin sƒ±ran (X)";
            }
        }

        function findBestMove(p) {
            for (let pattern of winPatterns) {
                let [a, b, c] = pattern;
                let vals = [board[a], board[b], board[c]];
                // Eƒüer 2 tane aynƒ± ta≈ütan varsa ve 3.s√º bo≈üsa orayƒ± d√∂nd√ºr
                if (vals.filter(v => v === p).length === 2 && vals.includes('')) {
                    const emptyIndex = vals.indexOf('');
                    return pattern[emptyIndex];
                }
            }
            return null;
        }

        function randomMove() {
            let emptyCells = board.map((v, i) => v === '' ? i : null).filter(v => v !== null);
            return emptyCells.length > 0 ? emptyCells[Math.floor(Math.random() * emptyCells.length)] : null;
        }

        function makeMove(index, player) {
            board[index] = player;
            const cells = document.querySelectorAll('.cell');
            cells[index].innerText = player;
            cells[index].style.color = player === 'X' ? '#fab1a0' : '#81ecec';
            checkResult();
        }

        function checkResult() {
            for (let pattern of winPatterns) {
                let [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    gameActive = false;
                    highlightWinner([a, b, c]);
                    if (board[a] === 'X') {
                        document.getElementById('status').innerText = "Kazandƒ±n! üéâ";
                        playerWins++;
                        localStorage.setItem('lucaenWins', playerWins);
                        document.getElementById('player-wins').innerText = playerWins;
                    } else {
                        document.getElementById('status').innerText = "LucaenBot kazandƒ± üòì";
                        botWins++;
                        localStorage.setItem('lucaenBotWins', botWins);
                        document.getElementById('bot-wins').innerText = botWins;
                    }
                    return;
                }
            }
            if (!board.includes('')) {
                document.getElementById('status').innerText = "Berabere! ü§ù";
                gameActive = false;
            }
        }

        function highlightWinner(indices) {
            const cells = document.querySelectorAll('.cell');
            indices.forEach(i => {
                cells[i].style.background = "rgba(255, 203, 219, 0.3)";
            });
        }

        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            gameActive = true;
            const cells = document.querySelectorAll('.cell');
            cells.forEach(c => {
                c.innerText = '';
                c.style.background = "rgba(56, 39, 53, 0.1)";
            });
            document.getElementById('status').innerText = "Sƒ±ra sende (X)";
        }

        // DISQUS AYARI
        var disqus_config = function () {
            this.page.url = window.location.href; 
            this.page.identifier = 'merry-marbling-bolum-9-ozel'; 
        };
        (function() { 
            var d = document, s = d.createElement('script');
            s.src = 'https://https-hnbeyazz-github-io-webtoon-arsiv.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
</body>
</html>
